{"mappings":"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","sources":["src/index.js","src/js/categoriesList.js","src/js/content.js","src/js/contentFunctions.js"],"sourcesContent":["import './js/fondImages';\nimport './js/bookMarkets';\nimport './js/sprite';\nimport './js/header';\nimport './js/categoriesList';\nimport './js/fondsList';\nimport './js/content';\nimport './js/modalBook';\nimport './js/burgerMenu';\nimport './js/loginization';\nimport './js/scrollup';\n","import { fetchCategoriesList } from '../services/books-api';\n\nconst refs = {\n  container: document.querySelector(`.all-categories-box`),\n  title: document.querySelector(`.all-categoris-title`),\n  element: document.querySelector(`.all-categoris-element`),\n};\n\nlet elementHaveCurrent;\n\nfetchCategoriesList()\n  .then(response => {\n    const categories = response.data;\n    const markup = createMarkup(categories);\n    refs.container.insertAdjacentHTML(`beforeend`, `${markup}`);\n  })\n  .catch(error => {\n    console.error('Error:', error);\n  });\n\nrefs.title.classList.add('current');\n\nrefs.container.addEventListener(`click`, showCategoryBook);\n\nfunction createMarkup(array) {\n  return array\n    .map(\n      categori =>\n        `<li class=\"all-categoris-list\">\n      <a class=\"all-categoris-element\" href=\"\" data-name=\"${categori.list_name}\"\n        >${categori.list_name}</a\n      >\n    </li>\n      `\n    )\n    .join(``);\n}\n\nfunction showCategoryBook() {\n  event.preventDefault();\n\n  const clickedElement = event.target;\n\n  const categoryName = clickedElement.dataset.name;\n  console.log(`Clicked on category: ${categoryName}`);\n  changeCurrent(clickedElement);\n}\n\nfunction changeCurrent(curentClic) {\n  const allCategoryListItems = document.querySelectorAll(\n    '.all-categoris-list a'\n  );\n  allCategoryListItems.forEach(item => {\n    if (item.classList.contains('current')) {\n      elementHaveCurrent = item;\n    }\n  });\n\n  if (curentClic !== elementHaveCurrent) {\n    curentClic.classList.add('current');\n    elementHaveCurrent.classList.remove('current');\n  }\n}\n","import { fetchToAllBooks, fetchBooksByCategory } from '../services/books-api';\nimport {\n  renderMarkupTopBooks,\n  createMarkupBooksByCategory,\n  countTopBooks,\n  renderError,\n  arrayBooksByCategory,\n} from './contentFunctions';\n\n//кі-сть загружених книг однієї категорії після того, як користувач натиснув на кнопку SEEMORE\nlet numberOfBooksShown = countTopBooks();\n//категорія, по кнопкі якій натиснули\nlet selectedCategory = '';\n\nconst HowManyBooksToLoad = 5;\nconst containerBook = document.querySelector('.container-books');\n\ngetTopBooks();\n\nfunction getTopBooks() {\n  containerBook.innerHTML = '';\n  fetchToAllBooks()\n    .then(response => {\n      return response;\n    })\n    .then(renderData)\n    .catch(errorfetchData);\n}\nexport function getTopBooks() {\n  fetchToAllBooks()\n    .then(result => {\n      return result.data;\n    })\n    .then(renderData)\n    .catch(errorfetchData);\n}\n\nfunction getBooksByCat(butElem, category) {\n  fetchBooksByCategory(category)\n    .then(result => {\n      return result.data;\n    })\n    .then(data => {\n      renderDataBycat(butElem, data);\n    })\n    .catch(errorfetchData);\n}\n\nexport function renderDataBycat(butElem, data) {\n  if (data.length === 0) {\n    //немає книг, потрібно показати картинку про це');\n    // let markup = renderError(data);\n    // containerBook.insertAdjacentHTML('beforeend', markup);\n    return;\n  }\n  const beforeSeeMore = document.querySelector('.content_btnSeeMore');\n  let markup = createMarkupWithFiveBooks(data);\n  const ulElem = butElem.previousElementSibling;\n  console.log(ulElem);\n  // beforeSeeMore.insertAdjacentHTML('beforebegin', markup);\n  butElem.previousElementSibling.insertAdjacentHTML('beforeend', markup);\n\n  //на елемент повішати маркуп!!!!!!!!!!\n}\n\n//якщо дані витягуємо вдало, то кладемо їх в масив\nfunction renderData(data) {\n  containerBook.insertAdjacentHTML('beforeend', '');\n  if (data.length === 0) {\n    //немає книг, потрібно показати картинку про це');\n    // let markup = renderError(data);\n    // containerBook.insertAdjacentHTML('beforeend', markup);\n    return;\n  }\n\n  let markup = renderMarkupTopBooks(data);\n  containerBook.insertAdjacentHTML('beforeend', markup);\n}\n\n//якщо помилка, то оброблюємо помилку\nfunction errorfetchData(error) {\n  let markup = renderError(error);\n  containerBook.insertAdjacentHTML('beforeend', markup);\n}\n\nconst test = document.querySelector('.container-books');\ntest.addEventListener('click', handleSumitSeeMore);\n\nfunction handleSumitSeeMore(e) {\n  e.preventDefault();\n  if (e.target.type !== 'button') {\n    return;\n  }\n\n  //якщо натиснули на нову категорію, то скидаємо параметри і заново беремо список книг\n  if (e.target.name !== selectedCategory) {\n    numberOfBooksShown = countTopBooks();\n  }\n\n  selectedCategory = e.target.name;\n  getBooksByCat(e.target, selectedCategory);\n\n  //ТУТ З МАСИВОМ НЕ ПОТРІБНО ПРАЦЮВАТИ!!!\n}\n\n//видаляємо з масиву перші пять елементів\nfunction deleteFiveElementsFromArray() {\n  for (let i = 1; i === arrayBooks.length; i++) {\n    if (i <= HowManyBooksToLoad) {\n      arrayBooks.shift();\n    } else {\n      return;\n    }\n  }\n}\n//якщо користувач натиснув на нову категорыю, скидаємо параметри\nfunction reset() {\n  //кі-сть загружених книг однієї категорії після того, як користувач натиснув на кнопку SEEMORE\n  numberOfBooksShown = countTopBooks();\n  //ко-сть книг в категории\n  numberBooks = 0;\n  //категорія, по кнопкі якій натиснули\n  selectedCategory = '';\n  //очищаємо массив книг однієї категорії\n  arrayBooks = [];\n}\n\nfunction createMarkupWithFiveBooks(arrayBooks) {\n  let counter = 0;\n  let markup = arrayBooks\n    .map((book, index) => {\n      if (index >= numberOfBooksShown && counter < HowManyBooksToLoad) {\n        counter += 1;\n        return `<li id=\"${book._id}\"class=\"content_book\">\n                          <a  href=\"${book.book_image}\" >\n                          <img class=\"content__image\" src=\"${book.book_image}\" alt=\"${book.title}\" loading=\"lazy\" />\n                          </a>\n                          <p id=\"content_book_name\">${book.title}</p>\n                          <p id=\"content_book_author\">${book.author}</p>\n                </li>`;\n      }\n    })\n    .join('');\n  numberOfBooksShown += HowManyBooksToLoad;\n  return markup;\n}\n","// export const category_books = [];\n\n//ф-ція для створення розмітки, яка видає топ книг\nexport function renderMarkupTopBooks(array) {\n  const markup = ` <h1 class=\"title-container-topBooks\">Best sellers <span class=\"title_blue\"> books </span></h1>\n  <ul class=\"content_list_categories\">${array\n    .map(kategory => {\n      return `<li class=\"content_categoryItem ${kategory.list_name}\">\n      <span class=\"content_category\">***********${kategory.list_name}</span>\n                <ul class=\"content_list_topBooks\">${kategory.books\n                  .map((book, indexBook) => {\n                    if (indexBook < countTopBooks()) {\n                      return `<li data-id=\"${book._id}\" class=\"content_book\">\n                          <a  href=\"${book.book_image}\" >\n                          <img class=\"content__image\" src=\"${book.book_image}\" alt=\"${book.title}\" loading=\"lazy\" />\n                          </a>\n                          <p id=\"content_book_name\">${book.title}</p>\n                          <p id=\"content_book_author\">${book.author}</p>\n                          </li>`;\n                    }\n                  })\n                  .join('')}</ul>\n          \n                <button class=\"content_btnSeeMore\" type=\"button\" name=\"${\n                  kategory.list_name\n                }\" \n                 action=\"submit\">SEE MORE</button>         \n          </li>`;\n    })\n    .join('')}</ul>`;\n\n  return markup;\n}\n\n// ф-ція приймає книги однієї категорії з бєкенду, вертає масив з книгами цієї категорії\nexport function arrayBooksByCategory(array) {\n  return (books = array.map(book => {\n    return book;\n  }));\n}\n\n// визначаємо, кількість книг в одній категорії в залежності від розміру екрана\nexport function countTopBooks() {\n  if (document.documentElement.clientWidth < 768) {\n    return 1;\n  } else if (\n    document.documentElement.clientWidth > 767 &&\n    document.documentElement.clientWidth < 1440\n  ) {\n    return 3;\n  } else if (document.documentElement.clientWidth > 1439) {\n    return 5;\n  }\n}\n\nexport function renderError(error) {\n  return `<div class=\"content-error\">\n         ERROR\n    </div>`;\n}\n"],"names":["parcelRequire","$7f543448dd6aeee5$var$elementHaveCurrent","$bBhLo","$7f543448dd6aeee5$var$refs","container","document","querySelector","title","element","fetchCategoriesList","then","response","categories","data","markup","map","categori","concat","list_name","join","insertAdjacentHTML","catch","error","console","classList","add","addEventListener","event","preventDefault","clickedElement","target","categoryName","dataset","name","log","curentClic","querySelectorAll","forEach","item","contains","remove","$f9456e7de9e839c0$export$e75d099adf0bbcb7","documentElement","clientWidth","$a6329c5cb4925ffd$var$numberOfBooksShown","$a6329c5cb4925ffd$var$selectedCategory","$a6329c5cb4925ffd$var$containerBook","$a6329c5cb4925ffd$var$getBooksByCat","butElem","category","fetchBooksByCategory","result","length","arrayBooks","counter","book","index","_id","book_image","author","$a6329c5cb4925ffd$var$createMarkupWithFiveBooks","ulElem","previousElementSibling","$a6329c5cb4925ffd$export$eda316e6c8ba7b5f","$a6329c5cb4925ffd$var$errorfetchData","$a6329c5cb4925ffd$var$renderData","kategory","books","indexBook","fetchToAllBooks","e","type"],"version":3,"file":"index.b369259e.js.map"}