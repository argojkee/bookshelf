{"mappings":"AAEA,MAEMA,EAAO,CACTC,GAAIC,SAASC,cAAc,kBAC3BC,2BAA4BF,SAASC,cAAc,oCASjDE,EAAQC,KAAKC,MAAMC,aAAaC,QAblB,kBAsBpB,SAASC,EAAaC,GAClB,MAAMC,EAASD,EAAME,KAAI,EAACC,WAACA,EAAUC,MAAEA,EAAKC,UAAEA,EAASC,OAAEA,EAAMC,YAAEA,EAAWC,UAAEA,EAASC,IAAEA,MACjFF,IACAA,EAAc,SAkBlB,MAAO,2CAA2CE,0BACtCN,uFAGEC,8BACDC,+KAMJE,kDAGID,gCA7BWE,EAAUE,QAAO,EAACC,KAACA,KAAmB,WAATA,GAA8B,gBAATA,GAAmC,aAATA,IAAqBT,KAAI,EAACS,KAACA,EAAIC,IAAEA,KACrH,WAATD,EACQ,gBAAgBC,wHAA0HD,cAGzI,gBAATA,EACQ,gBAAgBC,6HAA+HD,cAG9I,aAATA,EACQ,gBAAgBC,0HAA4HD,mBADvJ,IAGDE,KAAK,2DAuBN,IACHA,KAAK,IAERxB,EAAKC,GAAGwB,UAAYb,C,CAnDrBP,IACCL,EAAKI,2BAA2BsB,QAAS,EACzChB,EAAaL,IAGjBL,EAAKC,GAAG0B,iBAAiB,SAiDzB,SAAoBC,GAChB,GAA6B,WAA1BA,EAAMC,OAAOC,SACZ,OAGJ,MAAMC,EAASH,EAAMC,OAAOG,QAAQ,uBAAuBC,QAAQC,GAG7DC,EAFQ7B,KAAKC,MAAMC,aAAaC,QA3EtB,kBA6EYY,QAAO,EAACD,IAACA,KAASA,IAAQW,IACtDvB,aAAa4B,WA9EG,iBA+EhBpC,EAAKI,2BAA2BsB,QAAS,EAEb,IAAzBS,EAAcE,SACb7B,aAAa8B,QAlFD,gBAkFsBhC,KAAKiC,UAAUJ,IACjDnC,EAAKI,2BAA2BsB,QAAS,GAG7ChB,EAAayB,E","sources":["src/js/shoppingList.js"],"sourcesContent":["import axios from \"axios\";\n\nconst STORAGE_KEY = \"shopping-list\";\n\nconst refs = {\n    ul: document.querySelector(\".shopping-list\"),\n    shoppingListIsEmptyMessage: document.querySelector(\".shopping-list-is-empty-message\"),\n}\n\n\n// axios.get(`https://books-backend.p.goit.global/books/category?category=Business Books&`).then(({data}) => {\n//     console.log(data);\n//     localStorage.setItem(STORAGE_KEY, JSON.stringify(data));\n// });\n\nconst books = JSON.parse(localStorage.getItem(STORAGE_KEY));\n\nif(books) {\n    refs.shoppingListIsEmptyMessage.hidden = true;\n    createMarkup(books);\n}\n\nrefs.ul.addEventListener(\"click\", deleteItem);\n\nfunction createMarkup(books) {\n    const markup = books.map(({book_image, title, list_name, author, description, buy_links, _id}) => {\n        if(!description) {\n            description = \"sorry\";\n        }\n\n        const currentBuyLinks = buy_links.filter(({name}) => name === 'Amazon' || name === 'Apple Books' || name === 'Bookshop').map(({name, url}) => {\n            if(name === 'Amazon') {\n                return `<li><a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"./images/shopping-list/amazon.png\" width=\"32\" height=\"11\" alt=${name}></a></li>`\n            }\n\n            if(name === 'Apple Books') {\n                return `<li><a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"./images/shopping-list/apple_books.png\" width=\"16\" height=\"16\" alt=${name}></a></li>`\n            }\n\n            if(name === 'Bookshop') {\n                return `<li><a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"./images/shopping-list/bookshop.png\" width=\"16\" height=\"16\" alt=${name}></a></li>`\n            }\n        }).join('');\n        \n\n        return `<li class=\"shopping-list-item\" data-id=\"${_id}\">\n        <img src=\"${book_image}\" width=\"100\" height=\"142\">\n        <div>\n            <div>\n                <h3>${title}</h3>\n                <p>${list_name}</p>\n                <button type=\"button\" class=\"shopping-list-delete-btn\">\n                    Delete\n                </button>\n            </div>\n\n            <p>${description}</p>\n\n            <div>\n                <p>${author}</p>\n\n                <ul>${currentBuyLinks}</ul>\n            </div>\n\n        </div>\n    </li>`\n    }).join('');\n\n    refs.ul.innerHTML = markup;\n}\n\nfunction deleteItem(event) {\n    if(event.target.nodeName !== \"BUTTON\") {\n        return;\n    }\n\n    const itemId = event.target.closest('.shopping-list-item').dataset.id;\n    const books = JSON.parse(localStorage.getItem(STORAGE_KEY));\n\n    const filteredBooks = books.filter(({_id}) => _id !== itemId);\n    localStorage.removeItem(STORAGE_KEY);\n    refs.shoppingListIsEmptyMessage.hidden = false;\n\n    if(filteredBooks.length !== 0) {\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(filteredBooks));\n        refs.shoppingListIsEmptyMessage.hidden = true;\n    }\n\n    createMarkup(filteredBooks);\n}\n"],"names":["$e608521657d26110$var$refs","ul","document","querySelector","shoppingListIsEmptyMessage","$e608521657d26110$var$books","JSON","parse","localStorage","getItem","$e608521657d26110$var$createMarkup","books1","markup","map","book_image","title","list_name","author","description","buy_links","_id","filter","name","url","join","innerHTML","hidden","addEventListener","event","target","nodeName","itemId","closest","dataset","id","filteredBooks","removeItem","length","setItem","stringify"],"version":3,"file":"shopping.6649de63.js.map"}