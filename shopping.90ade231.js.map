{"mappings":"kpBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,KCnBTE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,8PCAzDH,EAAA,S,mFCAAI,EAAiB,IAAAC,IAAoBL,EAAA,SAAAM,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FC,EAAiB,IAAAN,IAAoBL,EAAA,SAAAM,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FE,EAAiB,IAAAP,IAAoBL,EAAA,SAAAM,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,iBCO5F,MAGMG,EAAO,CACXC,GAAIC,SAASC,cAAc,kBAC3BC,2BAA4BF,SAASC,cACnC,mCAEFE,MAAOH,SAASC,cAAc,yBAoChC,SAASG,EAAaC,GACpB,MAAMC,EAASD,EACZE,KACC,EAACC,WACCA,EAAUL,MACVA,EAAKM,UACLA,EAASC,OACTA,EAAMC,YACNA,EAAWC,UACXA,EAASC,IACTA,MAEKF,IACHA,EAxDR,8OA2DM,MAAMG,EAAkBF,GAAWG,QAC/B,EAACC,KAAEA,KACQ,WAATA,GAA8B,gBAATA,GAAmC,aAATA,IAElDT,KAAI,EAACS,KAAEA,EAAItB,IAAEA,KACC,WAATsB,EACK,2EACUtB,mHACKuB,EAAA5B,sDAA+D2B,8EAK1E,gBAATA,EACK,2EACUtB,mHACKuB,EAAArB,0DAAsEoB,8EAKjF,aAATA,EACK,2EACUtB,mHACKuB,EAAApB,wDAAmEmB,mFAH3F,IAQDE,KAAK,IAER,MAAO,2CAA2CL,yDACPL,WAAoBL,sRAIRA,0EACEM,0bAULE,sIAGDD,yEAEII,+DAGrD,IAGLI,KAAK,IAERpB,EAAKC,GAAGoB,UAAYb,C,EAtGtB,EAAAc,EAAAC,WACGC,MAAKC,IACgB,IAAhBA,EAAK1C,QACPiB,EAAKI,2BAA2BsB,MAAMC,QAAU,OAChDrB,EAAamB,GACbzB,EAAKK,MAAMqB,MAAME,aAAe,SAEhC5B,EAAKI,2BAA2BsB,MAAMC,QAAU,OAE5CzB,SAAS2B,gBAAgBC,YAAc,IACzC9B,EAAKK,MAAMqB,MAAME,aAAe,QAEhC5B,EAAKK,MAAMqB,MAAME,aAAe,Q,IAIrCG,OAAMC,GAASC,QAAQC,IAAIF,KAQ9BhC,EAAKC,GAAGkC,iBAAiB,SAiFzBC,eAA0BC,GACxB,GACEA,EAAMC,OAAOC,UAAUC,SAAS,wBAChCH,EAAMC,OAAOC,UAAUC,SAAS,oBACN,WAA1BH,EAAMC,OAAOG,SACb,CACA,MAAMC,EAASL,EAAMC,OAAOK,QAAQ,uBAAuBC,QAAQ5D,GAG7D6D,SAFc,EAAAvB,EAAAC,aAESN,QAAO,EAACF,IAAEA,KAAUA,IAAQ2B,KACzD,EAAApB,EAAAwB,SAAQD,GACR7C,EAAKI,2BAA2BsB,MAAMC,QAAU,OAE5CzB,SAAS2B,gBAAgBC,YAAc,IACzC9B,EAAKK,MAAMqB,MAAME,aAAe,QAEhC5B,EAAKK,MAAMqB,MAAME,aAAe,QAGL,IAAzBiB,EAAc9D,SAChBiB,EAAKI,2BAA2BsB,MAAMC,QAAU,OAChD3B,EAAKK,MAAMqB,MAAME,aAAe,QAGlCtB,EAAauC,E,CAGf,M","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-36cb0c9dd20fc55d.js","src/shopping.js","node_modules/@parcel/runtime-js/lib/runtime-aa8c20848b5ff81a.js","node_modules/@parcel/runtime-js/lib/runtime-5fe9ae9cf0ce9c9c.js","node_modules/@parcel/runtime-js/lib/runtime-1a6be9eeb19f7ac4.js","src/js/shoppingList.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"3bDNW\\\":\\\"shopping.90ade231.js\\\",\\\"eSSjB\\\":\\\"amazon.ebf56a29.webp\\\",\\\"7c2qh\\\":\\\"tradeBook2.8b7d9a59.webp\\\",\\\"6LmQw\\\":\\\"tradeBook3.6c292154.webp\\\",\\\"4jukI\\\":\\\"shopping.f94ba2dc.js\\\"}\"));","import './js/slick-slider';\nimport './js/sprite';\nimport './js/header';\nimport './js/fondsList';\nimport './js/modalBook';\nimport './js/burgerMenu';\nimport './js/loginization';\nimport './js/scrollup';\nimport './js/shoppingList';\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"eSSjB\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"7c2qh\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"6LmQw\")).toString();","// import axios from 'axios';\nimport amazonImage from '../images/bookMarkets/bookMarkets-x1/amazon.webp';\nimport appleBookImage from '../images/bookMarkets/bookMarkets-x1/tradeBook2.webp';\nimport bookshopImage from '../images/bookMarkets/bookMarkets-x1/tradeBook3.webp';\nimport { getBase, addBase } from './loginApi';\n\n// const STORAGE_KEY = 'shopping-list';\nconst lorem =\n  'Lorem ipsum dolor sit amet consectetur, adipisicing elit. Vitae ipsa possimus debitis dignissimos ipsum consequuntur voluptatibus facere vero itaque magni, vel veniam delectus provident molestiae id libero totam excepturi perferendis!';\n\nconst refs = {\n  ul: document.querySelector('.shopping-list'),\n  shoppingListIsEmptyMessage: document.querySelector(\n    '.shopping-list-is-empty-message'\n  ),\n  title: document.querySelector('.shopping-list-title'),\n};\n\n// axios.get(`https://books-backend.p.goit.global/books/category?category=Business Books&`).then(({data}) => {\n//     console.log(data);\n//     localStorage.setItem(STORAGE_KEY, JSON.stringify(data));\n// });\n\n// const books = JSON.parse(localStorage.getItem(STORAGE_KEY));\n\ngetBase()\n  .then(data => {\n    if (data.length !== 0) {\n      refs.shoppingListIsEmptyMessage.style.display = 'none';\n      createMarkup(data);\n      refs.title.style.marginBottom = '40px';\n    } else {\n      refs.shoppingListIsEmptyMessage.style.display = 'flex';\n\n      if (document.documentElement.clientWidth < 768) {\n        refs.title.style.marginBottom = '120px';\n      } else {\n        refs.title.style.marginBottom = '140px';\n      }\n    }\n  })\n  .catch(error => console.log(error));\n\n// if (books) {\n//   refs.shoppingListIsEmptyMessage.style.display = 'none';\n//   createMarkup(books);\n//   refs.title.style.marginBottom = '40px';\n// }\n\nrefs.ul.addEventListener('click', deleteItem);\n\nfunction createMarkup(books) {\n  const markup = books\n    .map(\n      ({\n        book_image,\n        title,\n        list_name,\n        author,\n        description,\n        buy_links,\n        _id,\n      }) => {\n        if (!description) {\n          description = lorem;\n        }\n\n        const currentBuyLinks = buy_links?.filter(\n            ({ name }) =>\n              name === 'Amazon' || name === 'Apple Books' || name === 'Bookshop'\n          )\n          .map(({ name, url }) => {\n            if (name === 'Amazon') {\n              return `<li class=\"shopping-list-buy-links-item\">\n                    <a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"shopping-list-buy-link\">\n                        <img src=\"${amazonImage}\" class=\"shopping-list-buy-link-img amazon\" alt=\"${name}\" width=\"32\" height=\"11\">\n                    </a>\n                </li>`;\n            }\n\n            if (name === 'Apple Books') {\n              return `<li class=\"shopping-list-buy-links-item\">\n                    <a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"shopping-list-buy-link\">\n                        <img src=\"${appleBookImage}\" class=\"shopping-list-buy-link-img apple-book\" alt=\"${name}\" width=\"16\" height=\"16\">\n                    </a>\n                </li>`;\n            }\n\n            if (name === 'Bookshop') {\n              return `<li class=\"shopping-list-buy-links-item\">\n                    <a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"shopping-list-buy-link\">\n                        <img src=\"${bookshopImage}\" class=\"shopping-list-buy-link-img bookshop\" alt=\"${name}\" width=\"16\" height=\"16\">\n                    </a>\n                </li>`;\n            }\n          })\n          .join('');\n\n        return `<li class=\"shopping-list-item\" data-id=\"${_id}\">\n        <img class=\"shopping-list-item-img\" src=\"${book_image}\" alt=\"${title}\" width=\"100\" height=\"142\">\n            <div class=\"shopping-list-item-content-wrapper\">\n                <div class=\"shopping-list-item-head\">\n                    <div class=\"shopping-list-item-head-wrapper\">\n                        <h3 class=\"shopping-list-item-title\">${title}</h3>\n                        <p class=\"shopping-list-item-category\">${list_name}</p>\n                    </div>\n                    <button type=\"button\" class=\"shopping-list-delete-btn\">\n                        <svg class=\"delete-btn-icon\" width=\"16\" height=\"16\">\n                            <use class=\"delete-btn-icon-use\" xlink:href=\"#icon-trash\">\n                        </svg>\n                    </button>\n                </div>\n            \n\n                <p class=\"shopping-list-item-description\">${description}</p>\n\n                <div class=\"shopping-list-item-bottom-wrapper\">\n                    <p class=\"shopping-list-item-author\">${author}</p>\n\n                    <ul class=\"shopping-list-buy-links-list\">${currentBuyLinks}</ul>\n                </div>\n            </div>\n    </li>`;\n      }\n    )\n    .join('');\n\n  refs.ul.innerHTML = markup;\n}\n\nasync function deleteItem(event) {\n  if (\n    event.target.classList.contains('delete-btn-icon-use') ||\n    event.target.classList.contains('delete-btn-icon') ||\n    event.target.nodeName === 'BUTTON'\n  ) {\n    const itemId = event.target.closest('.shopping-list-item').dataset.id;\n    const books = await getBase();\n\n    const filteredBooks = books?.filter(({ _id }) => _id !== itemId);\n    addBase(filteredBooks);\n    refs.shoppingListIsEmptyMessage.style.display = 'flex';\n\n    if (document.documentElement.clientWidth < 768) {\n      refs.title.style.marginBottom = '120px';\n    } else {\n      refs.title.style.marginBottom = '140px';\n    }\n\n    if (filteredBooks.length !== 0) {\n      refs.shoppingListIsEmptyMessage.style.display = 'none';\n      refs.title.style.marginBottom = '40px';\n    }\n\n    createMarkup(filteredBooks);\n  }\n\n  return;\n}\n\n// async function deleteItem(event) {\n//   if (\n//         !event.target.classList.contains('delete-btn-icon-use') ||\n//         !event.target.classList.contains('delete-btn-icon') ||\n//         !event.target.nodeName === 'BUTTON'\n//       ) {\n//         return;\n//       }\n\n//     const itemId = event.target.closest('.shopping-list-item').dataset.id;\n//     const books = await getBase();\n\n//     const filteredBooks = books.filter(({ _id }) => _id !== itemId);\n//     addBase(filteredBooks);\n//     createMarkup(filteredBooks);\n\n//     if (filteredBooks.length === 0) {\n//       refs.shoppingListIsEmptyMessage.style.display = 'flex';\n\n//       if (document.documentElement.clientWidth < 768) {\n//               refs.title.style.marginBottom = '120px';\n//             } else {\n//               refs.title.style.marginBottom = '140px';\n//             }\n//     }\n// }\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$00c0e72bc4a42e36$exports","URL","resolve","import","meta","url","toString","$30d6fb40a456aa76$exports","$c8ecb85ddb45574e$exports","$e608521657d26110$var$refs","ul","document","querySelector","shoppingListIsEmptyMessage","title","$e608521657d26110$var$createMarkup","books","markup","map","book_image","list_name","author","description","buy_links","_id","currentBuyLinks","filter","name","$parcel$interopDefault","join","innerHTML","$jkEaY","getBase","then","data","style","display","marginBottom","documentElement","clientWidth","catch","error","console","log","addEventListener","async","event","target","classList","contains","nodeName","itemId","closest","dataset","filteredBooks","addBase"],"version":3,"file":"shopping.90ade231.js.map"}