{"mappings":"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","sources":["src/index.js","src/js/categoriesList.js","src/js/content.js","src/js/contentFunctions.js"],"sourcesContent":["import './js/fondImages';\nimport './js/bookMarkets';\nimport './js/sprite';\nimport './js/header';\nimport './js/categoriesList';\nimport './js/fondsList';\nimport './js/content';\nimport './js/modalBook';\nimport './js/burgerMenu';\nimport './js/loginization';\nimport './js/scrollup';\n","import { fetchCategoriesList } from '../services/books-api';\n\nconst refs = {\n  container: document.querySelector(`.all-categories-box`),\n  title: document.querySelector(`.all-categoris-title`),\n  element: document.querySelector(`.all-categoris-element`),\n};\n\nlet elementHaveCurrent;\n\nfetchCategoriesList()\n  .then(response => {\n    const categories = response.data;\n    const markup = createMarkup(categories);\n    refs.container.insertAdjacentHTML(`beforeend`, `${markup}`);\n  })\n  .catch(error => {\n    console.error('Error:', error);\n  });\n\nrefs.title.classList.add('current');\n\nrefs.container.addEventListener(`click`, showCategoryBook);\n\nfunction createMarkup(array) {\n  return array\n    .map(\n      categori =>\n        `<li class=\"all-categoris-list\">\n      <a class=\"all-categoris-element\" href=\"\" data-name=\"${categori.list_name}\"\n        >${categori.list_name}</a\n      >\n    </li>\n      `\n    )\n    .join(``);\n}\n\nfunction showCategoryBook() {\n  event.preventDefault();\n\n  const clickedElement = event.target;\n\n  const categoryName = clickedElement.dataset.name;\n  console.log(`Clicked on category: ${categoryName}`);\n  changeCurrent(clickedElement);\n}\n\nfunction changeCurrent(curentClic) {\n  const allCategoryListItems = document.querySelectorAll(\n    '.all-categoris-list a'\n  );\n  allCategoryListItems.forEach(item => {\n    if (item.classList.contains('current')) {\n      elementHaveCurrent = item;\n    }\n  });\n\n  if (curentClic !== elementHaveCurrent) {\n    curentClic.classList.add('current');\n    elementHaveCurrent.classList.remove('current');\n  }\n}\n","import { fetchToAllBooks, fetchBooksByCategory } from '../services/books-api';\nimport {\n  renderMarkupTopBooks,\n  createMarkupBooksByCategory,\n  countTopBooks,\n  renderError,\n  arrayBooksByCategory,\n} from './contentFunctions';\n\n//кі-сть загружених книг однієї категорії після того, як користувач натиснув на кнопку SEEMORE\nlet numberOfBooksShown = countTopBooks();\n//категорія, по кнопкі якій натиснули\nlet selectedCategory = '';\n\nconst HowManyBooksToLoad = 5;\nconst containerBook = document.querySelector('.container-books');\n\ngetTopBooks();\n\nfunction getTopBooks() {\n  containerBook.innerHTML = '';\n  fetchToAllBooks()\n    .then(response => {\n      return response;\n    })\n    .then(renderData)\n    .catch(errorfetchData);\n}\nexport function getTopBooks() {\n  fetchToAllBooks()\n    .then(result => {\n      return result.data;\n    })\n    .then(renderData)\n    .catch(errorfetchData);\n}\n\nfunction getBooksByCat(butElem, category) {\n  fetchBooksByCategory(category)\n    .then(result => {\n      return result.data;\n    })\n    .then(data => {\n      renderDataBycat(butElem, data);\n    })\n    .catch(errorfetchData);\n}\n\nexport function renderDataBycat(butElem, data) {\n  if (data.length === 0) {\n    //немає книг, потрібно показати картинку про це');\n    // let markup = renderError(data);\n    // containerBook.insertAdjacentHTML('beforeend', markup);\n    return;\n  }\n  const beforeSeeMore = document.querySelector('.content_btnSeeMore');\n  let markup = createMarkupWithFiveBooks(data);\n  const ulElem = butElem.previousElementSibling;\n  console.log(ulElem);\n  // beforeSeeMore.insertAdjacentHTML('beforebegin', markup);\n  butElem.previousElementSibling.insertAdjacentHTML('beforeend', markup);\n\n  //на елемент повішати маркуп!!!!!!!!!!\n}\n\n//якщо дані витягуємо вдало, то кладемо їх в масив\nfunction renderData(data) {\n  containerBook.insertAdjacentHTML('beforeend', '');\n  if (data.length === 0) {\n    //немає книг, потрібно показати картинку про це');\n    // let markup = renderError(data);\n    // containerBook.insertAdjacentHTML('beforeend', markup);\n    return;\n  }\n\n  let markup = renderMarkupTopBooks(data);\n  containerBook.insertAdjacentHTML('beforeend', markup);\n}\n\n//якщо помилка, то оброблюємо помилку\nfunction errorfetchData(error) {\n  let markup = renderError(error);\n  containerBook.insertAdjacentHTML('beforeend', markup);\n}\n\nconst test = document.querySelector('.container-books');\ntest.addEventListener('click', handleSumitSeeMore);\n\nfunction handleSumitSeeMore(e) {\n  e.preventDefault();\n  if (e.target.type !== 'button') {\n    return;\n  }\n\n  //якщо натиснули на нову категорію, то скидаємо параметри і заново беремо список книг\n  if (e.target.name !== selectedCategory) {\n    numberOfBooksShown = countTopBooks();\n  }\n\n  selectedCategory = e.target.name;\n  getBooksByCat(e.target, selectedCategory);\n\n  //ТУТ З МАСИВОМ НЕ ПОТРІБНО ПРАЦЮВАТИ!!!\n}\n\n//видаляємо з масиву перші пять елементів\nfunction deleteFiveElementsFromArray() {\n  for (let i = 1; i === arrayBooks.length; i++) {\n    if (i <= HowManyBooksToLoad) {\n      arrayBooks.shift();\n    } else {\n      return;\n    }\n  }\n}\n//якщо користувач натиснув на нову категорыю, скидаємо параметри\nfunction reset() {\n  //кі-сть загружених книг однієї категорії після того, як користувач натиснув на кнопку SEEMORE\n  numberOfBooksShown = countTopBooks();\n  //ко-сть книг в категории\n  numberBooks = 0;\n  //категорія, по кнопкі якій натиснули\n  selectedCategory = '';\n  //очищаємо массив книг однієї категорії\n  arrayBooks = [];\n}\n\nfunction createMarkupWithFiveBooks(arrayBooks) {\n  let counter = 0;\n  let markup = arrayBooks\n    .map((book, index) => {\n      if (index >= numberOfBooksShown && counter < HowManyBooksToLoad) {\n        counter += 1;\n        return `<li id=\"${book._id}\"class=\"content_book\">\n                          <a  href=\"${book.book_image}\" >\n                          <img class=\"content__image\" src=\"${book.book_image}\" alt=\"${book.title}\" loading=\"lazy\" />\n                          </a>\n                          <p id=\"content_book_name\">${book.title}</p>\n                          <p id=\"content_book_author\">${book.author}</p>\n                </li>`;\n      }\n    })\n    .join('');\n  numberOfBooksShown += HowManyBooksToLoad;\n  return markup;\n}\n","// export const category_books = [];\n\n//ф-ція для створення розмітки, яка видає топ книг\nexport function renderMarkupTopBooks(array) {\n  const markup = ` <h1 class=\"title-container-topBooks\">Best sellers <span class=\"title_blue\"> books </span></h1>\n  <ul class=\"content_list_categories\">${array\n    .map(kategory => {\n      return `<li class=\"content_categoryItem ${kategory.list_name}\">\n      <span class=\"content_category\">***********${kategory.list_name}</span>\n                <ul class=\"content_list_topBooks\">${kategory.books\n                  .map((book, indexBook) => {\n                    if (indexBook < countTopBooks()) {\n                      return `<li data-id=\"${book._id}\" class=\"content_book\">\n                          <a  href=\"${book.book_image}\" >\n                          <img class=\"content__image\" src=\"${book.book_image}\" alt=\"${book.title}\" loading=\"lazy\" />\n                          </a>\n                          <p id=\"content_book_name\">${book.title}</p>\n                          <p id=\"content_book_author\">${book.author}</p>\n                          </li>`;\n                    }\n                  })\n                  .join('')}</ul>\n          \n                <button class=\"content_btnSeeMore\" type=\"button\" name=\"${\n                  kategory.list_name\n                }\" \n                 action=\"submit\">SEE MORE</button>         \n          </li>`;\n    })\n    .join('')}</ul>`;\n\n  return markup;\n}\n\n// ф-ція приймає книги однієї категорії з бєкенду, вертає масив з книгами цієї категорії\nexport function arrayBooksByCategory(array) {\n  return (books = array.map(book => {\n    return book;\n  }));\n}\n\n// визначаємо, кількість книг в одній категорії в залежності від розміру екрана\nexport function countTopBooks() {\n  if (document.documentElement.clientWidth < 768) {\n    return 1;\n  } else if (\n    document.documentElement.clientWidth > 767 &&\n    document.documentElement.clientWidth < 1440\n  ) {\n    return 3;\n  } else if (document.documentElement.clientWidth > 1439) {\n    return 5;\n  }\n}\n\nexport function renderError(error) {\n  return `<div class=\"content-error\">\n         ERROR\n    </div>`;\n}\n"],"names":["parcelRequire","$1Xv76","$852957c2b5c37805$var$refs","container","document","querySelector","title","element","$852957c2b5c37805$var$elementHaveCurrent","fetchCategoriesList","then","response","categories","data","markup","map","categori","list_name","join","insertAdjacentHTML","catch","error","console","classList","add","addEventListener","event","preventDefault","clickedElement","target","categoryName","dataset","name","log","curentClic","querySelectorAll","forEach","item","contains","remove","$5cf1eb56275d3cb8$export$e75d099adf0bbcb7","documentElement","clientWidth","$c0508c5db07a4ed5$var$numberOfBooksShown","$c0508c5db07a4ed5$var$selectedCategory","$c0508c5db07a4ed5$var$containerBook","$c0508c5db07a4ed5$var$getBooksByCat","butElem","category","fetchBooksByCategory","result","length","arrayBooks","counter","book","index","_id","book_image","author","$c0508c5db07a4ed5$var$createMarkupWithFiveBooks","ulElem","previousElementSibling","$c0508c5db07a4ed5$export$eda316e6c8ba7b5f","$c0508c5db07a4ed5$var$errorfetchData","$c0508c5db07a4ed5$var$renderData","kategory","books","indexBook","fetchToAllBooks","e","type"],"version":3,"file":"index.03344642.js.map"}