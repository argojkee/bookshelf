{"mappings":"gfAAAA,EAAA,S,6ECEA,IAAMC,EAAc,gBAIdC,EAAO,CACXC,GAAIC,SAASC,cAAc,kBAC3BC,2BAA4BF,SAASC,cACnC,mCAEFE,MAAOH,SAASC,cAAc,yBAQ1BG,EAAQC,KAAKC,MAAMC,aAAaC,QAAQX,IAU9C,SAASY,EAAaC,GACpB,IAAMC,EAASD,EACZE,KACC,SAAAC,G,IACEC,EAAUD,EAAVC,WACAX,EAAKU,EAALV,MACAY,EAASF,EAATE,UACAC,EAAMH,EAANG,OACAC,EAAWJ,EAAXI,YACAC,EAASL,EAATK,UACAC,EAAGN,EAAHM,IAEKF,IACHA,EAtCR,8OAyCM,IAAMG,EAAkBF,EACrBG,QACC,SAAAC,G,IAAGC,EAAID,EAAJC,K,MACQ,WAATA,GAA8B,gBAATA,GAAmC,aAATA,C,IAElDX,KAAI,SAAAU,G,IAAGC,EAAID,EAAJC,KAAMC,EAAGF,EAAHE,IACZ,MAAa,WAATD,GAQS,gBAATA,GAQS,aAATA,EAfK,2EACcE,OAAJD,EAAI,sOAcvB,C,IAQDE,KAAK,IAER,MAAO,2CACoCD,OADON,EAAI,yDAKCM,OAJZX,EAAW,sRAKGW,OADFtB,EAAM,0EAWTsB,OAVKV,EAAU,0bAahBU,OAHCR,EAAY,sIAKTQ,OAFJT,EAAO,yEAEaS,OAAhBL,EAAgB,+D,IAM1EM,KAAK,IAER5B,EAAKC,GAAG4B,UAAYhB,C,CArFlBP,IACFN,EAAKI,2BAA2B0B,MAAMC,QAAU,OAChDpB,EAAaL,GACbN,EAAKK,MAAMyB,MAAME,aAAe,QAGlChC,EAAKC,GAAGgC,iBAAiB,SAkFzB,SAAoBC,GAClB,GACEA,EAAMC,OAAOC,UAAUC,SAAS,wBAChCH,EAAMC,OAAOC,UAAUC,SAAS,oBACN,WAA1BH,EAAMC,OAAOG,SACb,CACA,IAAMC,EAASL,EAAMC,OAAOK,QAAQ,uBAAuBC,QAAQC,GAG7DC,EAFQpC,KAAKC,MAAMC,aAAaC,QAAQX,IAElBwB,QAAO,SAAAC,G,OAAMA,EAAHH,MAAkBkB,C,IACxD9B,aAAamC,WAAW7C,GACxBC,EAAKI,2BAA2B0B,MAAMC,QAAU,OAG5C7B,SAAS2C,gBAAgBC,YAAc,IACzC9C,EAAKK,MAAMyB,MAAME,aAAe,QAEhChC,EAAKK,MAAMyB,MAAME,aAAe,QAGL,IAAzBW,EAAcI,SAChBtC,aAAauC,QAAQjD,EAAaQ,KAAK0C,UAAUN,IACjD3C,EAAKI,2BAA2B0B,MAAMC,QAAU,OAChD/B,EAAKK,MAAMyB,MAAME,aAAe,QAGlCrB,EAAagC,E,CAGf,M","sources":["src/shopping.js","src/js/shoppingList.js"],"sourcesContent":["import './js/slick-slider';\nimport './js/sprite';\nimport './js/header';\nimport './js/fondsList';\nimport './js/modalBook';\nimport './js/burgerMenu';\nimport './js/loginization';\nimport './js/scrollup';\nimport './js/shoppingList';\n","import axios from 'axios';\n\nconst STORAGE_KEY = 'shopping-list';\nconst lorem =\n  'Lorem ipsum dolor sit amet consectetur, adipisicing elit. Vitae ipsa possimus debitis dignissimos ipsum consequuntur voluptatibus facere vero itaque magni, vel veniam delectus provident molestiae id libero totam excepturi perferendis!';\n\nconst refs = {\n  ul: document.querySelector('.shopping-list'),\n  shoppingListIsEmptyMessage: document.querySelector(\n    '.shopping-list-is-empty-message'\n  ),\n  title: document.querySelector('.shopping-list-title'),\n};\n\n// axios.get(`https://books-backend.p.goit.global/books/category?category=Business Books&`).then(({data}) => {\n//     console.log(data);\n//     localStorage.setItem(STORAGE_KEY, JSON.stringify(data));\n// });\n\nconst books = JSON.parse(localStorage.getItem(STORAGE_KEY));\n\nif (books) {\n  refs.shoppingListIsEmptyMessage.style.display = 'none';\n  createMarkup(books);\n  refs.title.style.marginBottom = '40px';\n}\n\nrefs.ul.addEventListener('click', deleteItem);\n\nfunction createMarkup(books) {\n  const markup = books\n    .map(\n      ({\n        book_image,\n        title,\n        list_name,\n        author,\n        description,\n        buy_links,\n        _id,\n      }) => {\n        if (!description) {\n          description = lorem;\n        }\n\n        const currentBuyLinks = buy_links\n          .filter(\n            ({ name }) =>\n              name === 'Amazon' || name === 'Apple Books' || name === 'Bookshop'\n          )\n          .map(({ name, url }) => {\n            if (name === 'Amazon') {\n              return `<li class=\"shopping-list-buy-links-item\">\n                    <a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"shopping-list-buy-link\">\n                        <img src=\"#\" class=\"shopping-list-buy-link-img\" width=\"16\" height=\"16\">\n                    </a>\n                </li>`;\n            }\n\n            if (name === 'Apple Books') {\n              return `<li class=\"shopping-list-buy-links-item\">\n                    <a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"shopping-list-buy-link\">\n                        <img src=\"#\" class=\"shopping-list-buy-link-img\" width=\"16\" height=\"16\">\n                    </a>\n                </li>`;\n            }\n\n            if (name === 'Bookshop') {\n              return `<li class=\"shopping-list-buy-links-item\">\n                    <a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"shopping-list-buy-link\">\n                        <img src=\"#\" class=\"shopping-list-buy-link-img\" width=\"16\" height=\"16\">\n                    </a>\n                </li>`;\n            }\n          })\n          .join('');\n\n        return `<li class=\"shopping-list-item\" data-id=\"${_id}\">\n        <img class=\"shopping-list-item-img\" src=\"${book_image}\" width=\"100\" height=\"142\">\n            <div class=\"shopping-list-item-content-wrapper\">\n                <div class=\"shopping-list-item-head\">\n                    <div class=\"shopping-list-item-head-wrapper\">\n                        <h3 class=\"shopping-list-item-title\">${title}</h3>\n                        <p class=\"shopping-list-item-category\">${list_name}</p>\n                    </div>\n                    <button type=\"button\" class=\"shopping-list-delete-btn\">\n                        <svg class=\"delete-btn-icon\" width=\"16\" height=\"16\">\n                            <use class=\"delete-btn-icon-use\" xlink:href=\"#icon-trash\">\n                        </svg>\n                    </button>\n                </div>\n            \n\n                <p class=\"shopping-list-item-description\">${description}</p>\n\n                <div class=\"shopping-list-item-bottom-wrapper\">\n                    <p class=\"shopping-list-item-author\">${author}</p>\n\n                    <ul class=\"shopping-list-buy-links-list\">${currentBuyLinks}</ul>\n                </div>\n            </div>\n    </li>`;\n      }\n    )\n    .join('');\n\n  refs.ul.innerHTML = markup;\n}\n\nfunction deleteItem(event) {\n  if (\n    event.target.classList.contains('delete-btn-icon-use') ||\n    event.target.classList.contains('delete-btn-icon') ||\n    event.target.nodeName === 'BUTTON' \n  ) {\n    const itemId = event.target.closest('.shopping-list-item').dataset.id;\n    const books = JSON.parse(localStorage.getItem(STORAGE_KEY));\n\n    const filteredBooks = books.filter(({ _id }) => _id !== itemId);\n    localStorage.removeItem(STORAGE_KEY);\n    refs.shoppingListIsEmptyMessage.style.display = 'flex';\n\n\n    if (document.documentElement.clientWidth < 768) {\n      refs.title.style.marginBottom = '120px';\n    } else {\n      refs.title.style.marginBottom = '140px';\n    }\n\n    if (filteredBooks.length !== 0) {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(filteredBooks));\n      refs.shoppingListIsEmptyMessage.style.display = 'none';\n      refs.title.style.marginBottom = '40px';\n    }\n\n    createMarkup(filteredBooks);\n  }\n\n  return;\n}\n"],"names":["parcelRequire","$0fbe84baae5e1bf4$var$STORAGE_KEY","$0fbe84baae5e1bf4$var$refs","ul","document","querySelector","shoppingListIsEmptyMessage","title","$0fbe84baae5e1bf4$var$books","JSON","parse","localStorage","getItem","$0fbe84baae5e1bf4$var$createMarkup","books1","markup","map","param1","book_image","list_name","author","description","buy_links","_id","currentBuyLinks","filter","param","name","url","concat","join","innerHTML","style","display","marginBottom","addEventListener","event","target","classList","contains","nodeName","itemId","closest","dataset","id","filteredBooks","removeItem","documentElement","clientWidth","length","setItem","stringify"],"version":3,"file":"shopping.766841fe.js.map"}