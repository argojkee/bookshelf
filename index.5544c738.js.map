{"mappings":"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","sources":["src/index.js","src/js/categoriesList.js","src/js/content.js","src/js/contentFunctions.js"],"sourcesContent":["import './js/fondImages';\nimport './js/bookMarkets';\nimport './js/sprite';\nimport './js/header';\nimport './js/categoriesList';\nimport './js/fondsList';\nimport './js/content';\nimport './js/modalBook';\nimport './js/burgerMenu';\nimport './js/loginization';\nimport './js/scrollup';\n","import { fetchCategoriesList } from '../services/books-api';\n\nimport { fetchBooksByCategory } from '../services/books-api';\n\n\n// імпорт функції, що рендерить розміттку по 5 книг бесцелеров\nimport { getTopBooks } from './content';\n\n\nconst refs = {\n  container: document.querySelector(`.all-categories-box`),\n  title: document.querySelector(`.all-categoris-title`),\n  element: document.querySelector(`.all-categoris-element`),\n};\n\n// визначаю місе куди буде рендериться розмітка кник відповідної категорії\nconst containerBook = document.querySelector('.container-books'); \n\nlet elementHaveCurrent;\n\nfetchCategoriesList()\n  .then(response => {\n    const categories = response.data;\n    const markup = createMarkup(categories);\n    refs.container.insertAdjacentHTML(`beforeend`, `${markup}`);\n  })\n  .catch(error => {\n    console.error('Error:', error);\n  });\n\nrefs.title.classList.add('current');\n\nrefs.container.addEventListener(`click`, showCategoryBook);\n\nfunction createMarkup(array) {\n  return array\n    .map(\n      categori =>\n        `<li class=\"all-categoris-list\">\n      <a class=\"all-categoris-element\" href=\"\" data-name=\"${categori.list_name}\"\n        >${categori.list_name}</a\n      >\n    </li>\n      `\n    )\n    .join(``);\n}\n\nfunction showCategoryBook() {\n  event.preventDefault();\n\n  const clickedElement = event.target;\n\n  if (!clickedElement.classList.contains('all-categoris-element') \n  && !clickedElement.classList.contains('all-categoris-title')) {\n    return\n  };\n\n  const categoryName = clickedElement.dataset.name;\n  console.log(`Clicked on category: ${categoryName}`);\n  changeCurrent(clickedElement);\n\n  \n  // якщо вибрано категорію `All categories` \n  // рендеряться всі книги\n  if (categoryName === `All categories`) {\n    getTopBooks();\n  } \n  // якщо вибрана категорія то рендериться \n  // розмітка всіх книг відповідної категорії\n  else {\n\n    getBooksFromCategories(categoryName);\n  }\n\n}\n\nfunction changeCurrent(curentClic) {\n  const allCategoryListItems = document.querySelectorAll(\n    '.all-categoris-list a'\n  );\n  allCategoryListItems.forEach(item => {\n    if (item.classList.contains('current')) {\n      elementHaveCurrent = item;\n    }\n  });\n\n  if (curentClic !== elementHaveCurrent) {\n    curentClic.classList.add('current');\n    elementHaveCurrent.classList.remove('current');\n  }\n}\n\nfunction getBooksFromCategories(category) {\n  fetchBooksByCategory(category)\n    .then(response => {\n      console.log('Received data from server:', response.data);\n      containerBook.innerHTML = '';\n      renderDataBooks(response.data); \n    })\n    .catch(error => {\n      console.error('Error:', error);\n    });\n}\n\nfunction renderDataBooks(booksData){\n  const markup = booksData\n        .map((book, indexBook) => {\n          return `<li class=\"content_book\" data-id=${book._id}>\n          <a  href=\"${book.book_image}\" >\n          <img class=\"content__image\" src=\"${book.book_image}\" alt=\"${\n            book.title\n          }\" loading=\"lazy\" />\n          </a>\n          <p id=\"content_book_name\">${book.title}</p>\n          <p id=\"content_book_author\">${book.author}</p>\n          </li>`;\n        })\n          .join('');\n        const markupList = `<ul class=\"content_list_topBooks\">${markup}</ul>`\n    containerBook.insertAdjacentHTML('beforeend', markupList);\n}\n\n","import { fetchToAllBooks, fetchBooksByCategory } from '../services/books-api';\nimport {\n  renderMarkupTopBooks,\n  createMarkupBooksByCategory,\n  countTopBooks,\n  renderError,\n  arrayBooksByCategory,\n} from './contentFunctions';\n\n//кі-сть загружених книг однієї категорії після того, як користувач натиснув на кнопку SEEMORE\nlet numberOfBooksShown = countTopBooks();\n//категорія, по кнопкі якій натиснули\nlet selectedCategory = '';\n\nconst HowManyBooksToLoad = 5;\nconst containerBook = document.querySelector('.container-books');\n\ngetTopBooks();\n\nfunction getTopBooks() {\n  containerBook.innerHTML = '';\n  fetchToAllBooks()\n    .then(response => {\n      return response;\n    })\n    .then(renderData)\n    .catch(errorfetchData);\n}\nexport function getTopBooks() {\n  fetchToAllBooks()\n    .then(result => {\n      return result.data;\n    })\n    .then(renderData)\n    .catch(errorfetchData);\n}\n\nfunction getBooksByCat(butElem, category) {\n  fetchBooksByCategory(category)\n    .then(result => {\n      return result.data;\n    })\n    .then(data => {\n      renderDataBycat(butElem, data);\n    })\n    .catch(errorfetchData);\n}\n\nexport function renderDataBycat(butElem, data) {\n  if (data.length === 0) {\n    //немає книг, потрібно показати картинку про це');\n    // let markup = renderError(data);\n    // containerBook.insertAdjacentHTML('beforeend', markup);\n    return;\n  }\n  const beforeSeeMore = document.querySelector('.content_btnSeeMore');\n  let markup = createMarkupWithFiveBooks(data);\n  const ulElem = butElem.previousElementSibling;\n  console.log(ulElem);\n  // beforeSeeMore.insertAdjacentHTML('beforebegin', markup);\n  butElem.previousElementSibling.insertAdjacentHTML('beforeend', markup);\n\n  //на елемент повішати маркуп!!!!!!!!!!\n}\n\n//якщо дані витягуємо вдало, то кладемо їх в масив\nfunction renderData(data) {\n  containerBook.insertAdjacentHTML('beforeend', '');\n  if (data.length === 0) {\n    //немає книг, потрібно показати картинку про це');\n    // let markup = renderError(data);\n    // containerBook.insertAdjacentHTML('beforeend', markup);\n    return;\n  }\n\n  let markup = renderMarkupTopBooks(data);\n  containerBook.insertAdjacentHTML('beforeend', markup);\n}\n\n//якщо помилка, то оброблюємо помилку\nfunction errorfetchData(error) {\n  let markup = renderError(error);\n  containerBook.insertAdjacentHTML('beforeend', markup);\n}\n\nconst test = document.querySelector('.container-books');\ntest.addEventListener('click', handleSumitSeeMore);\n\nfunction handleSumitSeeMore(e) {\n  e.preventDefault();\n  if (e.target.type !== 'button') {\n    return;\n  }\n\n  //якщо натиснули на нову категорію, то скидаємо параметри і заново беремо список книг\n  if (e.target.name !== selectedCategory) {\n    numberOfBooksShown = countTopBooks();\n  }\n\n  selectedCategory = e.target.name;\n  getBooksByCat(e.target, selectedCategory);\n\n  //ТУТ З МАСИВОМ НЕ ПОТРІБНО ПРАЦЮВАТИ!!!\n}\n\n//видаляємо з масиву перші пять елементів\nfunction deleteFiveElementsFromArray() {\n  for (let i = 1; i === arrayBooks.length; i++) {\n    if (i <= HowManyBooksToLoad) {\n      arrayBooks.shift();\n    } else {\n      return;\n    }\n  }\n}\n//якщо користувач натиснув на нову категорыю, скидаємо параметри\nfunction reset() {\n  //кі-сть загружених книг однієї категорії після того, як користувач натиснув на кнопку SEEMORE\n  numberOfBooksShown = countTopBooks();\n  //ко-сть книг в категории\n  numberBooks = 0;\n  //категорія, по кнопкі якій натиснули\n  selectedCategory = '';\n  //очищаємо массив книг однієї категорії\n  arrayBooks = [];\n}\n\nfunction createMarkupWithFiveBooks(arrayBooks) {\n  let counter = 0;\n  let markup = arrayBooks\n    .map((book, index) => {\n      if (index >= numberOfBooksShown && counter < HowManyBooksToLoad) {\n        counter += 1;\n        return `<li id=\"${book._id}\"class=\"content_book\">\n                          <a  href=\"${book.book_image}\" >\n                          <img class=\"content__image\" src=\"${book.book_image}\" alt=\"${book.title}\" loading=\"lazy\" />\n                          </a>\n                          <p id=\"content_book_name\">${book.title}</p>\n                          <p id=\"content_book_author\">${book.author}</p>\n                </li>`;\n      }\n    })\n    .join('');\n  numberOfBooksShown += HowManyBooksToLoad;\n  return markup;\n}\n","// export const category_books = [];\n\n//ф-ція для створення розмітки, яка видає топ книг\nexport function renderMarkupTopBooks(array) {\n  const markup = ` <h1 class=\"title-container-topBooks\">Best sellers <span class=\"title_blue\"> books </span></h1>\n  <ul class=\"content_list_categories\">${array\n    .map(kategory => {\n      return `<li class=\"content_categoryItem ${kategory.list_name}\">\n      <span class=\"content_category\">***********${kategory.list_name}</span>\n                <ul class=\"content_list_topBooks\">${kategory.books\n                  .map((book, indexBook) => {\n                    if (indexBook < countTopBooks()) {\n                      return `<li data-id=\"${book._id}\" class=\"content_book\">\n                          <a  href=\"${book.book_image}\" >\n                          <img class=\"content__image\" src=\"${book.book_image}\" alt=\"${book.title}\" loading=\"lazy\" />\n                          </a>\n                          <p id=\"content_book_name\">${book.title}</p>\n                          <p id=\"content_book_author\">${book.author}</p>\n                          </li>`;\n                    }\n                  })\n                  .join('')}</ul>\n          \n                <button class=\"content_btnSeeMore\" type=\"button\" name=\"${\n                  kategory.list_name\n                }\" \n                 action=\"submit\">SEE MORE</button>         \n          </li>`;\n    })\n    .join('')}</ul>`;\n\n  return markup;\n}\n\n// ф-ція приймає книги однієї категорії з бєкенду, вертає масив з книгами цієї категорії\nexport function arrayBooksByCategory(array) {\n  return (books = array.map(book => {\n    return book;\n  }));\n}\n\n// визначаємо, кількість книг в одній категорії в залежності від розміру екрана\nexport function countTopBooks() {\n  if (document.documentElement.clientWidth < 768) {\n    return 1;\n  } else if (\n    document.documentElement.clientWidth > 767 &&\n    document.documentElement.clientWidth < 1440\n  ) {\n    return 3;\n  } else if (document.documentElement.clientWidth > 1439) {\n    return 5;\n  }\n}\n\nexport function renderError(error) {\n  return `<div class=\"content-error\">\n         ERROR\n    </div>`;\n}\n"],"names":["parcelRequire","$bBhLo","$f9456e7de9e839c0$export$e75d099adf0bbcb7","document","documentElement","clientWidth","$a6329c5cb4925ffd$var$numberOfBooksShown","$a6329c5cb4925ffd$var$selectedCategory","$a6329c5cb4925ffd$var$containerBook","querySelector","$a6329c5cb4925ffd$export$3a1253a897925caa","innerHTML","fetchToAllBooks","then","response","$a6329c5cb4925ffd$var$renderData","catch","$a6329c5cb4925ffd$var$errorfetchData","result","data","$a6329c5cb4925ffd$var$getBooksByCat","butElem","category","fetchBooksByCategory","length","markup","arrayBooks","counter","map","book","index","concat","_id","book_image","title","author","join","$a6329c5cb4925ffd$var$createMarkupWithFiveBooks","ulElem","previousElementSibling","console","log","insertAdjacentHTML","$a6329c5cb4925ffd$export$eda316e6c8ba7b5f","kategory","list_name","books","indexBook","error","addEventListener","e","preventDefault","target","type","name","$7f543448dd6aeee5$var$elementHaveCurrent","$7f543448dd6aeee5$var$refs","container","element","$7f543448dd6aeee5$var$containerBook","fetchCategoriesList","categories","categori","classList","add","event","clickedElement","contains","categoryName","dataset","curentClic","querySelectorAll","forEach","item","remove","booksData","markupList"],"version":3,"file":"index.5544c738.js.map"}