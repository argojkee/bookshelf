{"mappings":"mkBAAAA,EAAAC,QAAiBC,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAAE,QAA6C,Q,ICAtHF,EAAA,SAAAG,SAA8CC,KAAKC,MAAM,iJCAzDL,EAAA,S,WCAA,IAAAM,EAAAN,EAAA,SCAAO,G,WAAAP,EAAA,U,aC0CO,SAASQ,IACd,OAAIC,SAASC,gBAAgBC,YAAc,IAClC,EAEPF,SAASC,gBAAgBC,YAAc,KACvCF,SAASC,gBAAgBC,YAAc,KAEhC,EACEF,SAASC,gBAAgBC,YAAc,KACzC,OADF,C,CD7C8D,IAAnEC,EAAqBJ,IAErBK,EAAmB,GAGjBC,EAAgBL,SAASM,cAAc,oBAC7BN,SAASM,cAAc,YAClBN,SAASM,cAAc,qBAWrC,SAASC,IACdF,EAAcG,UAAY,GAC1BH,EAAcG,UAAY,IAC1B,EAAAX,EAAAY,mBACGC,MAAK,SAAAC,GACJ,OAAOA,EAAOC,I,IAEfF,MAAK,SAAAE,G,OAASP,EAAcG,UC3BhB,2KA2BHK,ODAoDD,ECzB7DE,KAAI,SAAAC,GACH,MAAO,mCAC0BF,OADSE,EAASC,UAAU,6CAEfH,OADbE,EAASC,UAAU,+DAkBxCH,OAjBkCE,EAASE,MAC1CH,KAAI,SAACI,EAAMC,GACV,GAAIA,EAAYpB,IACd,MAAO,mEAC4Bc,OAAlBK,EAAKE,IAAI,WACTP,OADkBK,EAAKG,WAAW,8CAChBR,OAAlBK,EAAKE,IAAI,WACaP,OADJK,EAAKG,WAAW,oEACaR,OAAzBK,EAAKG,WAAW,WAEIR,OAFKK,EAAKI,MAAM,mIAGdT,OADFK,EAAKI,MAAM,8FACGT,OAAZK,EAAKK,OAAO,4E,IAK5EC,KAAK,IAAI,8FAIXX,OADCE,EAASC,UACV,mF,IAIZQ,KAAK,IAAI,Q,IDGd,SAASC,EAAcC,EAASC,IAC9B,EAAA9B,EAAA+B,sBAAqBD,GAClBjB,MAAK,SAAAC,GACJ,OAAOA,EAAOC,I,IAEfF,MAAK,SAAAE,IAMH,SAAyBc,EAASd,GACvC,IAAIiB,EAwBwB,SAAKC,EAAMC,GAGvC,IAAIC,EAAU,EACVC,EAAS,EACTJ,EAASE,EACVjB,KAAI,SAACI,EAAMgB,GACV,GAAIA,GAAS/B,GAAsB6B,EAnEd,EA+EnB,OAXAA,GAAW,EACXC,GAAU,EAGNC,EAAQ,IAAMH,EAAWI,UAuBrC,SAA0BL,GACxBA,EAAKM,UAAUC,IAAI,S,CAvBXC,CAAiBR,GACjBA,EAAKS,WAAWC,YAAYC,kBAAkBL,UAAUC,IACtD,wBAEFK,EAAA5C,GAAS6C,OAAOC,KAAK,gDAEhB,mEAC0C/B,OAAlBK,EAAKE,IAAI,WACaP,OADJK,EAAKG,WAAW,oEACaR,OAAzBK,EAAKG,WAAW,WAEKR,OAFIK,EAAKI,MAAM,qIAGXT,OADJK,EAAKI,MAAM,iGACKT,OAAZK,EAAKK,OAAO,iE,IAK7FC,KAAK,IAGR,OAFArB,GAAsB8B,EACtBA,EAAS,EACFJ,C,CAxDMgB,CAA0BnB,EAASd,GAChDc,EAAQoB,uBAAuBC,mBAAmB,YAAalB,E,CAP3DmB,CAAgBtB,EAASd,E,IAE1BqC,O,CA3BL5C,EAAcG,UAAY,yEAEwCK,OAA7CtB,EAAA,SAA6C,2FAKlEgB,IA4BaP,SAASM,cAAc,oBAC/B4C,iBAAiB,SAEtB,SAA4BC,GAE1B,GADAA,EAAEC,iBACoB,WAAlBD,EAAEE,OAAOC,KACX,OAIEH,EAAEE,OAAOE,OAASnD,IACpBD,EAAqBJ,KAEvBK,EAAmB+C,EAAEE,OAAOE,KAC5B9B,EAAc0B,EAAEE,OAAQjD,E,IA+C1BsC,EAAA5C,GAAS6C,OAAOa,KAAK,CACnBC,MAAO,QACPC,SAAU,eACVC,SAAU,OACVC,QAAS,EACTC,SAAU,OACVC,cAAc,EACdC,QAAS,IACTC,WAAY,YD7Gd,IASIC,EATEC,EAAO,CACXC,UAAWnE,SAASM,cAAe,uBACnCgB,MAAOtB,SAASM,cAAe,wBAC/B8D,QAASpE,SAASM,cAAe,2BAI7B+D,EAAgBrE,SAASM,cAAc,qBAI7C,EAAAT,EAAAyE,uBACG5D,MAAK,SAAA6D,GACJ,IAAMC,EAAaD,EAAS3D,KACtBiB,EAAsB2C,EAa3B1D,KACC,SAAA2D,G,MACE,8FAEG5D,OADiD4D,EAASzD,UAAU,gBACjDH,OAAnB4D,EAASzD,UAAU,kC,IAKzBQ,KAAM,IArBP0C,EAAKC,UAAUpB,mBAAoB,YAAY,GAAUlC,OAAPgB,G,IAEnDoB,OAAM,SAAAyB,GACLC,QAAQD,MAAM,SAAUA,E,IAG5BR,EAAK5C,MAAMc,UAAUC,IAAI,WAEzB6B,EAAKC,UAAUjB,iBAAkB,SAgBjC,WACE0B,MAAMxB,iBAEN,IAAMyB,EAAiBD,MAAMvB,OAE7B,IAAKwB,EAAezC,UAAU0C,SAAS,2BACnCD,EAAezC,UAAU0C,SAAS,uBACpC,OAGF,IAAMC,EAAeF,EAAeG,QAAQzB,KAC5CoB,QAAQM,IAAI,wBAAqCpE,OAAbkE,IAkBfG,EAjBPL,EAkBe7E,SAASmF,iBACpC,yBAEmBC,SAAQ,SAAAC,GACvBA,EAAKjD,UAAU0C,SAAS,aAC1Bb,EAAqBoB,E,SAIrBH,IAAejB,IACjBiB,EAAW9C,UAAUC,IAAI,WACzB4B,EAAmB7B,UAAUkD,OAAO,aAxBhB,mBAAlBP,EACFxE,KA2B4BoB,EArBLoD,GAsBzB,EAAAlF,EAAA+B,sBAAqBD,GAClBjB,MAAK,SAAA6D,GAUV,IAAyBgB,EACjB1D,EAaM2D,EAvBRb,QAAQM,IAAI,6BAA8BV,EAAS3D,MACnDyD,EAAc7D,UAAY,GAQP+E,EAPHhB,EAAS3D,KAQvBiB,EAAS0D,EACRzE,KAAI,SAACI,EAAMC,GACV,MAAO,oCACKN,OAD+BK,EAAKE,IAAI,2BAEjBP,OADvBK,EAAKG,WAAW,oDAE1BR,OADiCK,EAAKG,WAAW,WAIvBR,OAH1BK,EAAKI,MACN,6EAG6BT,OADFK,EAAKI,MAAM,gDACGT,OAAZK,EAAKK,OAAO,wB,IAGzCC,KAAK,IACFgE,EAAa,qCAA4C3E,OAAPgB,EAAO,SACnEwC,EAActB,mBAAmB,YAAayC,E,IApB7CvC,OAAM,SAAAyB,GACLC,QAAQD,MAAM,SAAUA,E,KAxB9B,IAAuBQ,EAgBvB,IAAgCvD,C","sources":["node_modules/@parcel/runtime-js/lib/runtime-0d7d46cb0d3b35f0.js","node_modules/@parcel/runtime-js/lib/runtime-e5dbb0a8471f397b.js","src/index.js","src/js/categoriesList.js","src/js/content.js","src/js/contentFunctions.js"],"sourcesContent":["module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"lPaFu\");","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"EVgbq\\\":\\\"index.d0244f6f.js\\\",\\\"lPaFu\\\":\\\"Books.34b8761e.png\\\",\\\"1Vwc0\\\":\\\"shopping.cf36ce4e.js\\\"}\"));","import './js/sprite';\nimport './js/header';\nimport './js/categoriesList';\nimport './js/fondsList';\nimport './js/slick-slider';\nimport './js/content';\nimport './js/modalBook';\nimport './js/burgerMenu';\nimport './js/loginization';\nimport './js/scrollup';","import { fetchCategoriesList } from '../services/books-api';\n\nimport { fetchBooksByCategory } from '../services/books-api';\n\n\n// імпорт функції, що рендерить розміттку по 5 книг бесцелеров\nimport { getTopBooks } from './content';\n\n\nconst refs = {\n  container: document.querySelector(`.all-categories-box`),\n  title: document.querySelector(`.all-categoris-title`),\n  element: document.querySelector(`.all-categoris-element`),\n};\n\n// визначаю місе куди буде рендериться розмітка кник відповідної категорії\nconst containerBook = document.querySelector('.container-books'); \n\nlet elementHaveCurrent;\n\nfetchCategoriesList()\n  .then(response => {\n    const categories = response.data;\n    const markup = createMarkup(categories);\n    refs.container.insertAdjacentHTML(`beforeend`, `${markup}`);\n  })\n  .catch(error => {\n    console.error('Error:', error);\n  });\n\nrefs.title.classList.add('current');\n\nrefs.container.addEventListener(`click`, showCategoryBook);\n\nfunction createMarkup(array) {\n  return array\n    .map(\n      categori =>\n        `<li class=\"all-categoris-list\">\n      <a class=\"all-categoris-element\" href=\"\" data-name=\"${categori.list_name}\"\n        >${categori.list_name}</a\n      >\n    </li>\n      `\n    )\n    .join(``);\n}\n\nfunction showCategoryBook() {\n  event.preventDefault();\n\n  const clickedElement = event.target;\n\n  if (!clickedElement.classList.contains('all-categoris-element') \n  && !clickedElement.classList.contains('all-categoris-title')) {\n    return\n  };\n\n  const categoryName = clickedElement.dataset.name;\n  console.log(`Clicked on category: ${categoryName}`);\n  changeCurrent(clickedElement);\n\n  \n  // якщо вибрано категорію `All categories` \n  // рендеряться всі книги\n  if (categoryName === `All categories`) {\n    getTopBooks();\n  } \n  // якщо вибрана категорія то рендериться \n  // розмітка всіх книг відповідної категорії\n  else {\n\n    getBooksFromCategories(categoryName);\n  }\n\n}\n\nfunction changeCurrent(curentClic) {\n  const allCategoryListItems = document.querySelectorAll(\n    '.all-categoris-list a'\n  );\n  allCategoryListItems.forEach(item => {\n    if (item.classList.contains('current')) {\n      elementHaveCurrent = item;\n    }\n  });\n\n  if (curentClic !== elementHaveCurrent) {\n    curentClic.classList.add('current');\n    elementHaveCurrent.classList.remove('current');\n  }\n}\n\nfunction getBooksFromCategories(category) {\n  fetchBooksByCategory(category)\n    .then(response => {\n      console.log('Received data from server:', response.data);\n      containerBook.innerHTML = '';\n      renderDataBooks(response.data); \n    })\n    .catch(error => {\n      console.error('Error:', error);\n    });\n}\n\nfunction renderDataBooks(booksData){\n  const markup = booksData\n        .map((book, indexBook) => {\n          return `<li class=\"content_book\" data-id=${book._id}>\n          <a  href=\"${book.book_image}\" >\n          <img class=\"content__image\" src=\"${book.book_image}\" alt=\"${\n            book.title\n          }\" loading=\"lazy\" />\n          </a>\n          <p id=\"content_book_name\">${book.title}</p>\n          <p id=\"content_book_author\">${book.author}</p>\n          </li>`;\n        })\n          .join('');\n        const markupList = `<ul class=\"content_list_topBooks\">${markup}</ul>`\n    containerBook.insertAdjacentHTML('beforeend', markupList);\n}\n\n","import Notiflix from 'notiflix';\nimport { fetchToAllBooks, fetchBooksByCategory } from '../services/books-api';\nimport { renderMarkupTopBooks, countTopBooks } from './contentFunctions';\n\n//кі-сть загружених книг однієї категорії після того, як користувач натиснув на кнопку SEEMORE\nlet numberOfBooksShown = countTopBooks();\n//категорія, по кнопкі якій натиснули\nlet selectedCategory = '';\n\nconst HowManyBooksToLoad = 5;\nconst containerBook = document.querySelector('.container-books');\nconst content = document.querySelector('.content');\nconst categoryItem = document.querySelector('.content_category');\n\ncontainerBook.innerHTML = `<div class=\"content-error\"> \n              <img \n              src=\"${require('../images/shopping-list/Books.png')}\"\n              alt=\"error\"\n              class=\"content_imgError\"/>\n         </div>`;\n\ngetTopBooks();\n\nexport function getTopBooks() {\n  containerBook.innerHTML = '';\n  containerBook.innerHTML = '';\n  fetchToAllBooks()\n    .then(result => {\n      return result.data;\n    })\n    .then(data => (containerBook.innerHTML = renderMarkupTopBooks(data)));\n}\n\nfunction getBooksByCat(butElem, category) {\n  fetchBooksByCategory(category)\n    .then(result => {\n      return result.data;\n    })\n    .then(data => {\n      renderDataBycat(butElem, data);\n    })\n    .catch();\n}\n\nexport function renderDataBycat(butElem, data) {\n  let markup = createMarkupWithFiveBooks(butElem, data);\n  butElem.previousElementSibling.insertAdjacentHTML('beforeend', markup);\n}\n\nconst test = document.querySelector('.container-books');\ntest.addEventListener('click', handleSumitSeeMore);\n\nfunction handleSumitSeeMore(e) {\n  e.preventDefault();\n  if (e.target.type !== 'button') {\n    return;\n  }\n\n  //якщо натиснули на нову категорію, то скидаємо параметри і заново беремо список книг\n  if (e.target.name !== selectedCategory) {\n    numberOfBooksShown = countTopBooks();\n  }\n  selectedCategory = e.target.name;\n  getBooksByCat(e.target, selectedCategory);\n}\n\n//створюється розмітка при натисненні кнопки SeeMore. Т к декілька книг вже загружено, то\n//ці перші книги не загружає, догружає ще декілька(HowManyBooksToLoad).\n//Коли доходе до кінця, видаляє кнопку.\nfunction createMarkupWithFiveBooks(elem, arrayBooks) {\n  //перший син нижнього сусіда батька\n  // console.log(elem.parentNode.nextSibling.firstElementChild);\n  let counter = 0;\n  let loaded = 0;\n  let markup = arrayBooks\n    .map((book, index) => {\n      if (index >= numberOfBooksShown && counter < HowManyBooksToLoad) {\n        counter += 1;\n        loaded += 1;\n\n        //якщо загрузили останню книгу, то видаляємл кнопку\n        if (index + 1 === arrayBooks.length) {\n          hiddenBtnSeeMore(elem);\n          elem.parentNode.nextSibling.firstElementChild.classList.add(\n            'contend_categoryMove'\n          );\n          Notiflix.Notify.info('this is all. Check out other category books');\n        }\n        return `<li class=\"content_book\">\n                          <a data-id=${book._id} href=\"${book.book_image}\" >\n                          <img class=\"content__image\" src=\"${book.book_image}\" alt=\"${book.title}\" loading=\"lazy\" />\n                          \n                          <span class=\"content_textname\" id=\"content_book_name\">${book.title}</span>\n                          <span class=\"content_textauthor\" id=\"content_book_author\">${book.author}</span>\n                          </a>\n                </li>`;\n      }\n    })\n    .join('');\n  numberOfBooksShown += loaded;\n  loaded = 0;\n  return markup;\n}\n\nfunction hiddenBtnSeeMore(elem) {\n  elem.classList.add('hidden');\n  // categoryItem.classList.add('contend_categoryMove');\n}\n\n//налаштування для Notflix\nNotiflix.Notify.init({\n  width: '480px',\n  position: 'right-bottom',\n  distance: '10px',\n  opacity: 1,\n  fontSize: '20px',\n  clickToClose: true,\n  timeout: 3000,\n  background: '#4f2ee8',\n});\n","\n//ф-ція для створення розмітки, яка видає топ книг\nexport function renderMarkupTopBooks(array) {\n  const markup = ` <h1 class=\"title-container-topBooks\"><span class=\"title_theme\">Best sellers</span> <span class=\"title_blue\"> books </span></h1>\n  <ul class=\"content_list_categories\">${array\n    .map(kategory => {\n      return `<li class=\"content_categoryItem ${kategory.list_name}\">\n      <span class=\"content_category\">${kategory.list_name}</span>\n                <ul class=\"content_list_topBooks\">${kategory.books\n                  .map((book, indexBook) => {\n                    if (indexBook < countTopBooks()) {\n                      return `<li class=\"content_book\">\n                          <a data-id=${book._id} href=\"${book.book_image}\" >\n                          <a data-id=${book._id} href=\"${book.book_image}\" >\n                          <img class=\"content__image\" src=\"${book.book_image}\" alt=\"${book.title}\" loading=\"lazy\" />\n                         \n                         <span class=\"content_textname\" id=\"content_book_name\">${book.title}</span>\n                         <span class=\"content_textauthor\" id=\"content_book_name\">${book.author}</span>\n                           </a>\n                          </li>`;\n                    }\n                  })\n                  .join('')}</ul>\n          \n                <button class=\"content_btnSeeMore\" type=\"button\" name=\"${\n                  kategory.list_name\n                }\" \n                 action=\"submit\">SEE MORE</button>         \n          </li>`;\n    })\n    .join('')}</ul>`;\n  return markup;\n}\n\n// ф-ція приймає книги однієї категорії з бєкенду, вертає масив з книгами цієї категорії\nexport function arrayBooksByCategory(array) {\n  return (books = array.map(book => {\n    return book;\n  }));\n}\n\n// визначаємо, кількість книг в одній категорії в залежності від розміру екрана\nexport function countTopBooks() {\n  if (document.documentElement.clientWidth < 768) {\n    return 1;\n  } else if (\n    document.documentElement.clientWidth > 767 &&\n    document.documentElement.clientWidth < 1140\n  ) {\n    return 3;\n  } else if (document.documentElement.clientWidth > 1139) {\n    return 5;\n  }\n}\n\n// export function renderError(error) {\n//   return `<div class=\"content-error\">\n//          ERROR\n//     </div>`;\n// }\nexport function renderError() {\n  return `<div class=\"content-error\">\n              <img\n              src=\"${path}\"\n              alt=\"error\"\n              width=\"400\"\n              height=\"400\"\n              class=\"content_imgError\"/>\n         </div>`;\n  // document.querySelector('.container-books').innerHTML = 'jasjdaj';\n}\n"],"names":["module","exports","parcelRequire","getBundleURL","resolve","register","JSON","parse","$bBhLo","$6JpON","$f9456e7de9e839c0$export$e75d099adf0bbcb7","document","documentElement","clientWidth","$a6329c5cb4925ffd$var$numberOfBooksShown","$a6329c5cb4925ffd$var$selectedCategory","$a6329c5cb4925ffd$var$containerBook","querySelector","$a6329c5cb4925ffd$export$3a1253a897925caa","innerHTML","fetchToAllBooks","then","result","data","concat","map","kategory","list_name","books","book","indexBook","_id","book_image","title","author","join","$a6329c5cb4925ffd$var$getBooksByCat","butElem","category","fetchBooksByCategory","markup","elem","arrayBooks","counter","loaded","index","length","classList","add","$a6329c5cb4925ffd$var$hiddenBtnSeeMore","parentNode","nextSibling","firstElementChild","$parcel$interopDefault","Notify","info","$a6329c5cb4925ffd$var$createMarkupWithFiveBooks","previousElementSibling","insertAdjacentHTML","$a6329c5cb4925ffd$export$eda316e6c8ba7b5f","catch","addEventListener","e","preventDefault","target","type","name","init","width","position","distance","opacity","fontSize","clickToClose","timeout","background","$7f543448dd6aeee5$var$elementHaveCurrent","$7f543448dd6aeee5$var$refs","container","element","$7f543448dd6aeee5$var$containerBook","fetchCategoriesList","response","categories","categori","error","console","event","clickedElement","contains","categoryName","dataset","log","curentClic","querySelectorAll","forEach","item","remove","booksData","markupList"],"version":3,"file":"index.d0244f6f.js.map"}