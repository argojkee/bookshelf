{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-dece704ce73cabfa.js","src/shopping.js","src/js/shoppingList.js","node_modules/@parcel/runtime-js/lib/runtime-aced00aa1c031de4.js","node_modules/@parcel/runtime-js/lib/runtime-918bb69418f74f28.js","node_modules/@parcel/runtime-js/lib/runtime-bac1da83dbb5b932.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"7ttGv\\\":\\\"shopping.b4ec9767.js\\\",\\\"4ExVO\\\":\\\"amazon.ebf56a29.webp\\\",\\\"6bWLK\\\":\\\"tradeBook2.8b7d9a59.webp\\\",\\\"coaqp\\\":\\\"tradeBook3.6c292154.webp\\\",\\\"1Vwc0\\\":\\\"shopping.6c3add33.js\\\"}\"));","import './js/sprite';\nimport './js/header';\nimport './js/fondsList';\nimport './js/slick-slider';\nimport './js/modalBook';\nimport './js/burgerMenu';\nimport './js/loginization';\nimport './js/scrollup';\nimport './js/shoppingList';\n","import amazonImage from '../images/bookMarkets/bookMarkets-x1/amazon.webp';\nimport appleBookImage from '../images/bookMarkets/bookMarkets-x1/tradeBook2.webp';\nimport bookshopImage from '../images/bookMarkets/bookMarkets-x1/tradeBook3.webp';\nimport { getBase, addBase } from './loginApi';\n\nconst lorem =\n  'Lorem ipsum dolor sit amet consectetur, adipisicing elit. Vitae ipsa possimus debitis dignissimos ipsum consequuntur voluptatibus facere vero itaque magni, vel veniam delectus provident molestiae id libero totam excepturi perferendis!';\n\nconst refs = {\n  ul: document.querySelector('.shopping-list'),\n  shoppingListIsEmptyMessage: document.querySelector(\n    '.shopping-list-is-empty-message'\n  ),\n  title: document.querySelector('.shopping-list-title'),\n};\n\ngetBase()\n  .then(data => {\n    if (data.length !== 0) {\n      refs.shoppingListIsEmptyMessage.style.display = 'none';\n      createMarkup(data);\n      refs.title.style.marginBottom = '40px';\n    } else {\n      refs.shoppingListIsEmptyMessage.style.display = 'flex';\n\n      if (document.documentElement.clientWidth < 768) {\n        refs.title.style.marginBottom = '120px';\n      } else {\n        refs.title.style.marginBottom = '140px';\n      }\n    }\n  }).catch(error => console.log(error));\n\nrefs.ul.addEventListener('click', deleteItem);\n\nfunction createMarkup(books) {\n  const markup = books\n    .map(\n      ({\n        book_image,\n        title,\n        list_name,\n        author,\n        description,\n        buy_links,\n        _id,\n      }) => {\n        if (!description) {\n          description = lorem;\n        }\n\n        const currentBuyLinks = buy_links?.filter(\n            ({ name }) =>\n              name === 'Amazon' || name === 'Apple Books' || name === 'Bookshop'\n          )\n          .map(({ name, url }) => {\n            if (name === 'Amazon') {\n              return `<li class=\"shopping-list-buy-links-item\">\n                    <a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"shopping-list-buy-link\">\n                        <img src=\"${amazonImage}\" class=\"shopping-list-buy-link-img amazon\" alt=\"${name}\" width=\"32\" height=\"11\">\n                    </a>\n                </li>`;\n            }\n\n            if (name === 'Apple Books') {\n              return `<li class=\"shopping-list-buy-links-item\">\n                    <a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"shopping-list-buy-link\">\n                        <img src=\"${appleBookImage}\" class=\"shopping-list-buy-link-img apple-book\" alt=\"${name}\" width=\"16\" height=\"16\">\n                    </a>\n                </li>`;\n            }\n\n            if (name === 'Bookshop') {\n              return `<li class=\"shopping-list-buy-links-item\">\n                    <a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"shopping-list-buy-link\">\n                        <img src=\"${bookshopImage}\" class=\"shopping-list-buy-link-img bookshop\" alt=\"${name}\" width=\"16\" height=\"16\">\n                    </a>\n                </li>`;\n            }\n          })\n          .join('');\n\n        return `<li class=\"shopping-list-item\" data-id=\"${_id}\">\n        <img class=\"shopping-list-item-img\" src=\"${book_image}\" alt=\"${title}\" width=\"100\" height=\"142\">\n            <div class=\"shopping-list-item-content-wrapper\">\n                <div class=\"shopping-list-item-head\">\n                    <div class=\"shopping-list-item-head-wrapper\">\n                        <h3 class=\"shopping-list-item-title\">${title}</h3>\n                        <p class=\"shopping-list-item-category\">${list_name}</p>\n                    </div>\n                    <button type=\"button\" class=\"shopping-list-delete-btn\">\n                        <svg class=\"delete-btn-icon\" width=\"16\" height=\"16\">\n                            <use class=\"delete-btn-icon-use\" xlink:href=\"#icon-trash\">\n                        </svg>\n                    </button>\n                </div>\n            \n\n                <p class=\"shopping-list-item-description\">${description}</p>\n\n                <div class=\"shopping-list-item-bottom-wrapper\">\n                    <p class=\"shopping-list-item-author\">${author}</p>\n\n                    <ul class=\"shopping-list-buy-links-list\">${currentBuyLinks}</ul>\n                </div>\n            </div>\n    </li>`;\n      }\n    )\n    .join('');\n\n  refs.ul.innerHTML = markup;\n}\n\nasync function deleteItem(event) {\n  if (\n    event.target.classList.contains('delete-btn-icon-use') ||\n    event.target.classList.contains('delete-btn-icon') ||\n    event.target.nodeName === 'BUTTON'\n  ) {\n    const itemId = event.target.closest('.shopping-list-item').dataset.id;\n    const books = await getBase();\n\n    const filteredBooks = books?.filter(({ _id }) => _id !== itemId);\n    addBase(filteredBooks);\n    refs.shoppingListIsEmptyMessage.style.display = 'flex';\n\n    if (document.documentElement.clientWidth < 768) {\n      refs.title.style.marginBottom = '120px';\n    } else {\n      refs.title.style.marginBottom = '140px';\n    }\n\n    if (filteredBooks.length !== 0) {\n      refs.shoppingListIsEmptyMessage.style.display = 'none';\n      refs.title.style.marginBottom = '40px';\n    }\n\n    createMarkup(filteredBooks);\n  }\n\n  return;\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('7ttGv') + require('./helpers/bundle-manifest').resolve(\"4ExVO\");","module.exports = require('./helpers/bundle-url').getBundleURL('7ttGv') + require('./helpers/bundle-manifest').resolve(\"6bWLK\");","module.exports = require('./helpers/bundle-url').getBundleURL('7ttGv') + require('./helpers/bundle-manifest').resolve(\"coaqp\");"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$bpxeT","$e8d2422c90a04ff1$exports","getBundleURL","resolve","$830efb6fdf8dc405$exports","$b72636c688108a0f$exports","$0fbe84baae5e1bf4$var$refs","ul","document","querySelector","shoppingListIsEmptyMessage","title","$0fbe84baae5e1bf4$var$createMarkup","books","markup","map","param1","book_image","list_name","author","description","buy_links","_id","currentBuyLinks","filter","param","name","concat","$parcel$interopDefault","join","innerHTML","$0fbe84baae5e1bf4$var$_deleteItem","$2TvXO","mark","_callee","event","itemId","filteredBooks","target","classList","contains","nodeName","closest","dataset","$jwqYp","getBase","_ctx","sent","addBase","style","display","documentElement","clientWidth","marginBottom","apply","this","arguments","then","data","catch","error","console","log","addEventListener"],"version":3,"file":"shopping.b4ec9767.js.map"}